<!doctype html>
<head>
	<title>Dedguenodgo</title>
	<meta charset="UTF-8">
	<link href="favicon.ico" rel="icon" type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="bootstrap-theme.min.css" />
	<link rel="stylesheet" type="text/css" href="style.css" />
	<script src="jquery.min.js"></script>
	<script src="knockout-3.0.0.debug.js"></script>
	<script src="main.js"></script>
</head>
<body>
	Connect√© en tant que: <select data-bind="options: lists(), value: loggedInUser, optionsValue: 'id', optionsText:'label'"></select> 
	<br><select class="form-control input-large" data-bind="options: lists(), value: selectedList, optionsValue: 'id', optionsText:'label'"></select> 
	<ul class="list-group" data-bind="foreach: displayedPresents()">
		<li class="present list-group-item" data-bind="event: { dblclick: function(){$root.editPresent($data);} }, css: { offered: $root.displayPresentAsOffered($data) }">
		<button class="btn btn-default" data-bind="visible: $root.loggedInUser() != $root.selectedList(), click: function() { $root.togglePresentOffered($data); }, text: $data.offeredBy ? 'Offert' : 'Offrir', attr: { title: $data.offeredBy ? 'Marquer comme non offert': 'Offrir' }">Offrir</button>
		<button class="btn btn-default" data-bind="click: function() { $root.editPresent($data); }">Modifier</button>
		<h4 class="list-group-item-heading" data-bind="text:title"> </h4>
		<p class="list-group-item-text" data-bind="text:description"> </p>
		</li>
	</ul>
	<button data-bind="click: addPresent">Ajouter un cadeau</button>
	<!--present edition dialog -->
	<div class="modal" data-bind="visible: editing" style="display: block;">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true" data-bind="click: cancelEdition">&times;</button>
					<h4 class="modal-title" data-bind="text: editPopupText()"></h4>
				</div>
				<div class="modal-body">
					<form class="form" data-bind="submit: saveEditedPresent">
						<div class="form-group">
							<label>Titre</label>
							<input class="form-control" type="text" data-bind="value:$root.edition.title, hasfocus: true"></input>
						</div>
						<div class="form-group">
							<label>Description</label>
							<textarea class="form-control" data-bind="value:$root.edition.description"></textarea>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: cancelEdition">Annuler</button>
					<button type="button" class="btn btn-primary" data-bind="click: saveEditedPresent">Sauvegarder les changements</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		$(document).ready(function() {
			window.viewModel = new ViewModel();
			ko.applyBindings(window.viewModel);
		});
	</script>
</body>
